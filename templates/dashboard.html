{% extends "base.html" %} {% include 'header.html' %} {% block body %}
<div class="container mt-4">
  <h2>Bienvenido, {{ current_user.nombre }} ðŸ‘‹</h2>
  <p class="lead">Este es tu panel principal en la Tienda Nelli.</p>

  <div class="row mt-4">
    <div class="col-md-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">âž• Nuevo producto</h5>
          <p class="card-text">Publica un nuevo producto en tu tienda.</p>
          <a
            href="{{ url_for('rutas.nuevo_producto') }}"
            class="btn btn-primary"
            >Crear producto</a
          >
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">ðŸ›’ Carrito</h5>
          <p class="card-text">Revisa las cosas que estan en tu carrito.</p>
          <a
            href="{{ url_for('rutas.carrito') }}"
            class="btn btn-primary"
            >Ver carrito</a
          >
        </div>
      </div>
    </div>
  </div>

  {% for producto in productos %} 
  {% if producto.usuario_id == current_user.id %}
  <div class="col-md-4">
    <div class="card mb-4">
      {% if producto.imagenes %}
      <img
        src="{{ url_for('rutas.mostrar_imagen', imagen_id=producto.imagenes[0].id) }}"
        class="card-img-top"
        alt="Imagen de {{ producto.nombre }}"
      />
      {% else %}
      <img
        src="{{ url_for('static', filename='images/product-placeholder.jpg') }}"
        class="card-img-top"
        alt="Producto sin imagen"
      />
      {% endif %}
      <div class="card-body">
        <h5 class="card-title">{{ producto.nombre }}</h5>
        <p class="card-text">{{ producto.descripcion[:100] }}...</p>
        <h4 class="text-success"><strong>${{ producto.precio }}</strong></h4>
      </div>
    </div>
  </div>
  {% endif %} {% endfor %}
</div>
{% endblock %}
